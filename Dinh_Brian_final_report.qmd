---
title: "Final Report on Brooklyn Housing Dataset (2003-2017)"
subtitle: |
  | Class: Data Science 1 with R (STAT 301-1)
author: "Brian Dinh"
date: today

format:
  html:
    toc: true
    embed-resources: true
    
execute:
  echo: true
  warning: false
number-sections: true
from: markdown+emoji 
---

::: {.callout-tip icon="false"}
## Github Repo Link

<https://github.com/stat301-1-2023-fall/final-project-1-BrianDinh26.git>
:::

```{r}
#| echo: false
#import dataset and libraries at top of document

#I do not want scientific notation for my graphs.
options(scipen = 999)

#libraries
library(tidyverse)
library(naniar)
library(janitor)
library(visdat)
library(ggthemes)

#import dataset
brooklyn_sales <- read_csv("data/brooklyn_sales_clean.csv")

#put these filterings in a SEPARATE CODE CHUNK LATER.
brooklyn_sales_res <- brooklyn_sales |> 
  filter(tax_class_at_sale == c("1", "2"))

brooklyn_sales_nonres <- brooklyn_sales |> 
  filter(tax_class_at_sale == c("3", "4"))

```

# Introduction {#sec-introduction}

For this report, I explored a dataset labelled "[Brooklyn Home Sales 2003 to 2017](https://www.kaggle.com/datasets/tianhwu/brooklynhomes2003to2017/data)," which describes information in regards to all buildings, residential and nonresidential, sold in the New York borough of Brooklyn. The data comes from the government of the state of New York, and links to the data can be found under References ([@sec-references]). Additionally, the cleaned dataset could not be uploaded to GitHub for the same reason, [so I have added a Google Drive link to it here](https://drive.google.com/drive/folders/1_OyRKj4xWoZ5CgJ5v0GhLubceh9yT5wW?usp=sharing).

For this exploratory data analysis, I was primarily motivated by my curiosity in what could be the main motivators for selling more buildings in the Brooklyn market, especially since buildings in this area tend to be more expensive than the rest of the United States due to its urbanity and access to New York City as a whole. Additionally, I wished to look at what factors could have affected housing price increases in the area. Last of all, I wanted to look at what areas in Brooklyn are the most desired based on the popularity in sales in this dataset and what neighborhoods have become less popular.

# Data Overview and Quality

For the original "Brooklyn Home Sales 2003 to 2017" dataset, there are 111 variables and 390,883 observations. There are 32 categorical variables, 71 numerical variables, 7 logical variables, and 1 date variable. 

There are missingness issues for many columns associated with geographic mapping information, borough data (e.g. what borough the building is in), and some building information (like total units, building stories, etc.). Due to this missingness, I will not be able to construct a geographic visualization of the data using a dashboard package like Shiny and may be limited in my analysis of nonresidential buildings, as thorough building information could affect nonresidential prices. I do not believe the missing borough data will affect my analysis because all of the buildings sold are located in Brooklyn.

The dataset is not in the GitHub for this final project as it is too large (207.6 MB) to commit to the GitHub, so please refer to the hyperlink above in Introduction ([@sec-introduction]) for access to the original dataset and the cleaned dataset.

The cleaned dataset has 390,833 observations and 81 columns. There are 19 categorical variables, 61 numeric variables, and 1 date variable.

# Explorations

## What factors affect how many buildings are being sold in Brooklyn over this time period?
WIP: Adding text to this graph later.
```{r}
#| echo: false

brooklyn_sales_res |>
  filter(sale_price > 10) |>
  mutate(sale_price = cut(
    sale_price,
    breaks = c(
      0,
      200000,
      300000,
      400000,
      500000,
      600000,
      700000,
      800000,
      900000,
      1000000,
      1250000,
      1500000,
      1750000,
      2000000,
      2500000,
      3000000,
      6000000
    )
  )) |>
  filter(is.na(sale_price) == FALSE) |>
  ggplot() +
  geom_bar(aes(x = sale_price)) +
  scale_x_discrete(
    labels = c(
      "< $200k",
      "$200k-$300k",
      "$300k-$400k",
      "$400k-$500k",
      "$500k-$600k",
      "$600k-$700k",
      "$700k-$800k",
      "$800k-$900k",
      "$900k-$1m",
      "$1m-$1.25m",
      "$1.25m-$1.5m",
      "$1.5m-$1.75m",
      "$1.75m-$2m",
      "$2m-$2.5m",
      "$2.5m-$3m",
      "$3m-$6m"
    )
  ) +
  scale_y_continuous(expand = c(0, 0)) +
  theme_minimal() +
  theme(axis.text.x = element_text(size = 4))
```


## What factors affect housing prices based on the data?

## What neighborhoods have become the most popular?

# Conclusions

# References {#sec-references}
-   "Annualized Sales Update." NYC Department of Finance, New York City, [www.nyc.gov/site/finance/taxes/property-annualized-sales-update.page](www.nyc.gov/site/finance/taxes/property-annualized-sales-update.page).
-   Wu, Tommy. "Brooklyn Home Sales, 2003 to 2017." Kaggle, 15 Feb. 2018, [www.kaggle.com/datasets/tianhwu/brooklynhomes2003to2017/data](www.kaggle.com/datasets/tianhwu/brooklynhomes2003to2017/data).

